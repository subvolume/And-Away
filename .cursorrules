# And Away · LLM Development Guide  
*(Markdown edition — June 2025)*

---

## 0 · CONTEXT
- **App** iOS client for searching, collecting and bookmarking places on a map.  
- **Tech Stack**  
  - SwiftUI  
  - Google Places Swift SDK for iOS ≥ 10.0 (“new” SDK, *not* the legacy UIKit one)  
  - CloudKit *private* database for per‑user bookmarks  
- **Project Tree**
  ```
  And Away/
  ├── Resources/          # Color, font & spacing constants
  ├── Views/Components/   # Reusable SwiftUI components
  └── Docs/               # Technical specs
  ```

---

## 1 · PRIORITY
1. **Follow explicit user instructions.**  
2. **Apply iOS/Swift best practices.**  
3. **Clarify conflicts before acting.**  
4. **MUST NOT** introduce new design elements unless user says `ALLOW_NEW_UI`.

---

## 2 · TRIGGERS → ACTIONS
| WHEN (detected event) | THEN (atomic, imperative) |
|-----------------------|---------------------------|
| `URL_DETECTED` – user message contains a URL | 1. **Fetch** the URL.  2. **Store** full contents in context.  3. Proceed. |
| `BUG_REPORT` – user states a bug | 1. Provide fix.  2. Output sentinel `⟪WAIT_FOR_TEST⟫` and halt. |
| `BUG_OK` – user confirms fix | Resume normal flow. |
| `CONTEXT_MISSING` – insufficient info to act | Ask a **specific** clarifying question; wait for response. |
| `MULTIPLE_APPROACHES` – several viable solutions | List trade‑offs → recommend one → wait for user choice. |

---

## 3 · CONSTRAINTS
* **MUST** consult official documentation **before** writing code.  
* **MUST_NOT** run or test the app locally; rely on user for all runtime feedback.  
* **SHOULD** reuse components in `Views/Components/`.  
* **MUST** add descriptive comments to every code artifact.  
* **MUST** use SDK‑built‑in features before rolling custom ones.  
* Placeholder UI text = `"PLACEHOLDER"`; query user if styling needed.

---

## 4 · WORKFLOW CHECKLIST
1. ❑ Identify required docs → cite exact section.  
2. ❑ Produce solution or code patch.  
3. ❑ If bug‑fixing, emit `⟪WAIT_FOR_TEST⟫`.  
4. ❑ On `BUG_OK`, continue pending tasks.  
5. ❑ Log clarifying questions using `CONTEXT_MISSING` rule.

---

## 5 · EXAMPLES

### Bug‑fix loop
```
User → “The map crashes when I tap Save.”
LLM  → // code patch…
LLM  → “⟪WAIT_FOR_TEST⟫ Please test and confirm the bug is resolved.”
```

### New UI request
```
User → “Show saved places in a carousel.”
LLM  → “I’ll create **SavedPlacesCarousel** using existing card styles. ALLOW_NEW_UI?”
```

---

## 6 · TOKEN LEGEND
| Token | Meaning |
|-------|---------|
| `⟪WAIT_FOR_TEST⟫` | Halt responses until user confirms fix. |
| `ALLOW_NEW_UI`    | User grants permission for new design work. |

---

## END_OF_INSTRUCTIONS